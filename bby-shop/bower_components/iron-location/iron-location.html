<html><head><link rel="import" href="../polymer/polymer.html">


<script>"use strict";Polymer({is:"iron-location",properties:{path:{type:String,notify:!0,value:function(){return window.location.pathname}},query:{type:String,notify:!0,value:function(){return window.location.search.slice(1)}},hash:{type:String,notify:!0,value:function(){return window.location.hash.slice(1)}},dwellTime:{type:Number,value:2e3},urlSpaceRegex:{type:String,value:""},_urlSpaceRegExp:{computed:"_makeRegExp(urlSpaceRegex)"},_lastChangedAtAt:{type:Number,value:-(1/0)},_initialized:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:["_updateUrl(path, query, hash)"],attached:function(){this.listen(window,"hashchange","_hashChanged"),this.listen(window,"location-changed","_urlChanged"),this.listen(window,"popstate","_urlChanged"),this.listen(document.body,"click","_globalOnClick"),this._initialized=!0,this._urlChanged()},detached:function(){this.unlisten(window,"hashchange","_hashChanged"),this.unlisten(window,"location-changed","_urlChanged"),this.unlisten(window,"popstate","_urlChanged"),this.unlisten(document.body,"click","_globalOnClick"),this._initialized=!1},_now:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},_hashChanged:function(){this.hash=window.location.hash.substring(1)},_urlChanged:function(){this._dontUpdateUrl=!0,this._hashChanged(),this.path=window.location.pathname,this.query=window.location.search.substring(1),this._dontUpdateUrl=!1,this._updateUrl()},_getUrl:function(){var n=this.path,t=this.query;return t&&(n+="?"+t),this.hash&&(n+="#"+this.hash),n},_updateUrl:function(){if(!this._dontUpdateUrl&&this._initialized){var n=this._getUrl(),t=window.location.pathname+window.location.search+window.location.hash;if(n!=t){var i=new URL(n,window.location.protocol+"//"+window.location.host).href,e=this._now(),o=this._lastChangedAt+this.dwellTime>e;this._lastChangedAt=e,o?window.history.replaceState({},"",i):window.history.pushState({},"",i),this.fire("location-changed",{},{node:window})}}},_globalOnClick:function(n){var t=this._getSameOriginLinkHref(n);t&&(window.history.pushState({},"",t),this.fire("location-changed",{},{node:window}),n.preventDefault())},_getSameOriginLinkHref:function(n){if(0!==n.button)return null;if(n.metaKey||n.ctrlKey)return null;for(var t=Polymer.dom(n).path,i=null,e=0;e<t.length;e++){var o=t[e];if("A"===o.tagName&&o.href){i=o.href;break}}if(!i)return null;var a;a=null!=document.baseURI?new URL(i,document.baseURI):new URL(i);var h;if(window.location.origin?h=window.location.origin:(h=window.location.protocol+"//"+window.location.hostname,window.location.port&&(h+=":"+window.location.port)),a.origin!==h)return null;var r=a.pathname+a.search+a.hash;if(this._urlSpaceRegExp&&!this._urlSpaceRegExp.test(r))return null;var l=new URL(r,window.location.href).href;return l},_makeRegExp:function(n){return RegExp(n)}});</script>
</head><body></body></html>